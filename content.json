{"meta":{"title":"Kaviilee's blog","subtitle":null,"description":"å”¯æœ‰çŸ¥è¯†ä¸ç¦»ä¸å¼ƒ","author":"kaviilee","url":"https://github.com/Kaviilee/blog.git","root":"/blog/"},"pages":[{"title":"404 Not Found","date":"2020-09-24T14:04:55.105Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"404.html","permalink":"https://github.com/Kaviilee/blog.git/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"å…³äº","date":"2020-09-24T14:04:55.105Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"about/index.html","permalink":"https://github.com/Kaviilee/blog.git/about/index.html","excerpt":"","text":"95å åœ¨èŒç å†œ æƒ³æ¢ä»½å¥½ç‚¹çš„å·¥ï¼ æƒ³å›è€å®¶ç§ç”° _(:Ğ·ã‚âˆ ) _ æŒç»­æ›´æ–°â€¦"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2020-09-24T14:04:55.105Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"categories/index.html","permalink":"https://github.com/Kaviilee/blog.git/categories/index.html","excerpt":"","text":""},{"title":"essays","date":"2019-09-07T15:08:39.000Z","updated":"2020-09-24T14:04:55.105Z","comments":false,"path":"essays/index.html","permalink":"https://github.com/Kaviilee/blog.git/essays/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2020-09-24T14:04:55.105Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"friends/index.html","permalink":"https://github.com/Kaviilee/blog.git/friends/index.html","excerpt":"ğŸ“¢ å‹æƒ…é“¾æ¥","text":"ğŸ“¢ å‹æƒ…é“¾æ¥ ğŸ“¢ å‹é“¾æ ¼å¼ åšå®¢åï¼šKaviilee åœ°å€ï¼šhttps://kaviilee.github.io/blog/ å¤´åƒï¼šhttps://cdn.jsdelivr.net/gh/Kaviilee/cdn@1.1/blog/images/custom/papalymo.jpg ç®€ä»‹ï¼šå”¯æœ‰çŸ¥è¯†ä¸ç¦»ä¸å¼ƒ å‹é“¾ä¸ç„¶åˆ†å…ˆåé¡ºåº åœ¨ä¸‹æ–¹ç•™è¨€æ¿ç•™è¨€ï¼Œæ ¼å¼å¦‚ä¸Š ç”³è¯·å‹é“¾æ—¶è®°å¾—å…ˆæŠŠæœ¬ç«™æŒ‚ä¸ºå‹é“¾å“¦~"},{"title":"","date":"2020-09-24T14:04:55.109Z","updated":"2020-09-24T14:04:55.109Z","comments":true,"path":"mylist/index.html","permalink":"https://github.com/Kaviilee/blog.git/mylist/index.html","excerpt":"","text":""},{"title":"è¯´è¯´","date":"2020-09-24T14:04:55.109Z","updated":"2020-09-24T14:04:55.109Z","comments":true,"path":"shuoshuo/index.html","permalink":"https://github.com/Kaviilee/blog.git/shuoshuo/index.html","excerpt":"","text":"new Artitalk({ appId: 'BreaVvx97UMIMsnq4bAaUDuG-MdYXbMMI', appKey: '2F8UD2LPgYvYQM9OOD5X4CJV' }) #pubShuo { margin-right: 4px; } #shanchur, #shuoshuo-modal, #userinfo, #shanchu { padding: 10px 0; } #shuoshuo-modal p { margin: 10px 0; } p.shuoshuo_time span:last-of-type>span { display: flex; }"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2020-09-24T14:04:55.109Z","updated":"2020-09-24T14:04:55.109Z","comments":true,"path":"tags/index.html","permalink":"https://github.com/Kaviilee/blog.git/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"JavaScriptç±»å‹è½¬æ¢","slug":"javascriptç±»å‹è½¬æ¢","date":"2020-09-09T23:23:10.000Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"2020/09/09/javascriptç±»å‹è½¬æ¢/","link":"","permalink":"https://github.com/Kaviilee/blog.git/2020/09/09/javascript%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/","excerpt":"å…³äº JavaScript ç±»å‹è½¬æ¢çš„ä¸€äº›ç¬”è®°ã€‚","text":"å…³äº JavaScript ç±»å‹è½¬æ¢çš„ä¸€äº›ç¬”è®°ã€‚ å‰è¨€å°†å€¼ä»ä¸€ç§ç±»å‹è½¬æ¢åˆ°å¦ä¸€ç§ç±»å‹é€šå¸¸ç§°ä¸ºç±»å‹è½¬æ¢ã€‚ åŸå§‹å€¼è½¬å¸ƒå°”å€¼JavaScriptä¸­ï¼Œåªæœ‰ 6 ç§å€¼å¯ä»¥è¢«è½¬æ¢ä¸ºfalseï¼Œå…¶ä½™éƒ½ä¼šè¢«è½¬æ¢æˆ trueã€‚ 12345678910console.log(Boolean()) // falseconsole.log(Boolean(false)) // falseconsole.log(Boolean(undefined)) // falseconsole.log(Boolean(null)) // falseconsole.log(Boolean(+0)) // falseconsole.log(Boolean(-0)) // falseconsole.log(Boolean(NaN)) // falseconsole.log(Boolean(\"\")) // false åŸå§‹å€¼è½¬æ•°å­—ä½¿ç”¨ Number å‡½æ•°å°†å€¼çš„ç±»å‹è½¬æ¢æˆæ•°å­—ç±»å‹ã€‚ æ ¹æ®è§„èŒƒï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œåˆ™è°ƒç”¨ ToNumber(value) è®¡ç®—å‡ºå€¼è¿”å›ï¼Œå¦åˆ™è¿”å› +0ã€‚ æ­¤å¤„çš„ ToNumber è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªåº•å±‚è§„èŒƒä¸Šå®ç°çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰æš´éœ²å‡ºæ¥ã€‚ å€¼ç±»å‹ ç»“æœ Undefined NaN Null +0 Boolean å¦‚æœæ˜¯ trueï¼Œè¿”å›1ï¼›å¦‚æœæ˜¯ falseï¼Œè¿”å›0 Number è¿”å›ä¸ä¹‹ç›¸ç­‰çš„å€¼ String å¦‚ä¸‹ 12345678910111213141516171819202122console.log(Number()) // +0console.log(Number(undefined)) // NaNconsole.log(Number(null)) // +0console.log(Number(false)) // +0console.log(Number(true)) // 1console.log(Number(\"123\")) // 123console.log(Number(\"-123\")) // -123console.log(Number(\"1.2\")) // 1.2console.log(Number(\"000123\")) // 123console.log(Number(\"-000123\")) // -123console.log(Number(\"0x11\")) // 17console.log(Number(\"\")) // 0console.log(Number(\" \")) // 0console.log(Number(\"123 123\")) // NaNconsole.log(Number(\"foo\")) // NaNconsole.log(Number(\"100a\")) // NaN åŸå§‹å€¼è½¬å­—ç¬¦ä½¿ç”¨ String å‡½æ•°å°†å€¼çš„ç±»å‹è½¬æ¢æˆå­—ç¬¦ç±»å‹ã€‚ æ ¹æ®è§„èŒƒï¼Œå¦‚æœå‡½æ•°æœ‰å‚æ•°ï¼Œåˆ™è°ƒç”¨ ToString(value) è®¡ç®—å‡ºå€¼è¿”å›ï¼Œå¦åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚ å€¼ç±»å‹ ç»“æœ Undefined â€˜undefinedâ€™ Null â€˜nullâ€™ Boolean å¦‚æœæ˜¯ trueï¼Œè¿”å› â€œtrueâ€ï¼›å¦‚æœæ˜¯ falseï¼Œè¿”å› â€œfalseâ€ String è¿”å›ä¸ä¹‹ç›¸ç­‰çš„å€¼ Number å¦‚ä¸‹ 1234567891011121314console.log(String()) // ç©ºå­—ç¬¦ä¸²console.log(String(undefined)) // undefinedconsole.log(String(null)) // nullconsole.log(String(false)) // falseconsole.log(String(true)) // trueconsole.log(String(0)) // 0console.log(String(-0)) // 0console.log(String(NaN)) // NaNconsole.log(String(Infinity)) // Infinityconsole.log(String(-Infinity)) // -Infinityconsole.log(String(1)) // 1 åŸå§‹å€¼è½¬å¯¹è±¡åŸå§‹å€¼é€šè¿‡è°ƒç”¨ String()ã€Number() æˆ–è€… Boolean() æ„é€ å‡½æ•°å°±èƒ½è½¬åŒ–ä¸ºå„è‡ªçš„åŒ…è£…å¯¹è±¡ã€‚ null å’Œ undefinedï¼Œå½“å°†å®ƒä»¬ç”¨åœ¨æœŸæœ›æ˜¯ä¸€ä¸ªå¯¹è±¡çš„åœ°æ–¹éƒ½ä¼šé€ æˆä¸€ä¸ªç±»å‹é”™è¯¯ (TypeError) å¼‚å¸¸ï¼Œè€Œä¸ä¼šæ‰§è¡Œæ­£å¸¸çš„è½¬æ¢ã€‚ å¯¹è±¡è½¬å¸ƒå°”å€¼æ‰€æœ‰å¯¹è±¡è½¬ä¸ºå¸ƒå°”å€¼éƒ½ä¸º trueã€‚ å¯¹è±¡è½¬å­—ç¬¦ä¸²å’Œæ•°å­—å¯¹è±¡è½¬æ¢åˆ°å­—ç¬¦ä¸²æˆ–è€…æ•°å­—éƒ½æ˜¯è°ƒç”¨å¾…è½¬æ¢å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•æ¥å®ç°çš„ã€‚ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³• toString() å’Œ valueOf()ã€‚ æ‰€æœ‰å¯¹è±¡é™¤äº† null å’Œ undefined ä¹‹å¤–çš„ä»»ä½•å€¼éƒ½æœ‰ toString æ–¹æ³•ï¼Œé€šå¸¸ï¼Œå®ƒå’Œ String æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€è‡´çš„ã€‚ JavaScript æ ¹æ®ä¸åŒçš„ç±»å„è‡ªçš„ç‰¹ç‚¹ï¼Œå®šä¹‰äº†æ›´å¤šç‰ˆæœ¬çš„ toString æ–¹æ³•ã€‚ 12345678console.log((&#123;&#125;).toString()) // [object Object]console.log([].toString()) // \"\"console.log([0].toString()) // 0console.log([1, 2, 3].toString()) // 1,2,3console.log((function()&#123;var a = 1;&#125;).toString()) // function ()&#123;var a = 1;&#125;console.log((/\\d+/g).toString()) // /\\d+/gconsole.log((new Date(2010, 0, 1)).toString()) // Fri Jan 01 2010 00:00:00 GMT+0800 (CST) å¦ä¸€ä¸ªè½¬æ¢å¯¹è±¡çš„æ–¹æ³•æ˜¯ valueOfï¼Œè¡¨ç¤ºå¯¹è±¡çš„åŸå§‹å€¼ã€‚é»˜è®¤çš„ valueOf æ–¹æ³•è¿”å›è¿™ä¸ªå¯¹è±¡æœ¬èº«ã€‚æ—¥æœŸæ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒä¼šè¿”å›å®ƒçš„ä¸€ä¸ªå†…å®¹è¡¨ç¤ºï¼š1970 å¹´ 1 æœˆ 1æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°ã€‚ 12var date = new Date(2020, 9, 6);console.log(date.valueOf()) // 1601913600000 å¯¹è±¡è½¬å­—ç¬¦ä¸² å€¼ç±»å‹ ç»“æœ Object 1. primValue = ToPrimitive(input, Number)2. è¿”å› ToString(primValue)ã€‚ å¯¹è±¡è½¬æ•°å­— å‚æ•°ç±»å‹ ç»“æœ Object 1. primValue = ToPrimitive(input, Number)2. è¿”å› ToNumber(primValue)ã€‚ 12345678910console.log(Number(&#123;&#125;)) // NaNconsole.log(Number(&#123;a : 1&#125;)) // NaNconsole.log(Number([])) // 0console.log(Number([0])) // 0console.log(Number([1, 2, 3])) // NaNconsole.log(Number(function()&#123;var a = 1;&#125;)) // NaNconsole.log(Number(/\\d+/g)) // NaNconsole.log(Number(new Date(2010, 0, 1))) // 1262275200000console.log(Number(new Error('a'))) // NaN Number([]) æ—¶ï¼Œå…ˆè°ƒç”¨äº† [] çš„ valueOf æ–¹æ³•è¿”å›äº† [] ï¼Œå› ä¸ºä¸æ˜¯åŸå§‹å€¼ï¼Œç»§ç»­è°ƒç”¨ toString æ–¹æ³•ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œç»§ç»­è°ƒç”¨ ToNumberï¼Œç©ºå­—ç¬¦ä¸²è¿”å› 0ã€‚ Number([1,2,3]) æ—¶ï¼Œå…ˆè°ƒç”¨äº† [1, 2, 3] çš„ valueOf æ–¹æ³•è¿”å›äº† [1, 2, 3]ï¼Œå†è°ƒç”¨ toString æ–¹æ³•ï¼Œè¿”å› 1,2,3ï¼Œè°ƒç”¨ ToNumberï¼Œè¿”å›NaNã€‚ ToPrimitiveè¯­æ³•å¦‚ä¸‹ï¼š 1ToPrimitive(input[, PreferredType]) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ inputï¼Œè¡¨ç¤ºè¦å¤„ç†çš„è¾“å…¥å€¼ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ PreferredTypeï¼Œéå¿…å¡«ï¼Œè¡¨ç¤ºå¸Œæœ›è½¬æ¢æˆçš„ç±»å‹ï¼Œæœ‰ä¸¤ä¸ªå€¼å¯ä»¥é€‰ï¼ŒNumber æˆ–è€… Stringã€‚ å½“ä¸ä¼ å…¥ PreferredType æ—¶ï¼Œå¦‚æœ input æ˜¯æ—¥æœŸç±»å‹ï¼Œç›¸å½“äºä¼ å…¥ Stringï¼Œå¦åˆ™ï¼Œéƒ½ç›¸å½“äºä¼ å…¥ Numberã€‚ å¦‚æœä¼ å…¥çš„ input æ˜¯ Undefinedã€Nullã€Booleanã€Numberã€String ç±»å‹ï¼Œç›´æ¥è¿”å›è¯¥å€¼ã€‚ å¦‚æœæ˜¯ ToPrimitive(obj, Number)ï¼Œå¤„ç†æ­¥éª¤å¦‚ä¸‹ï¼š å¦‚æœ obj ä¸º åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å› å¦åˆ™ï¼Œè°ƒç”¨ valueOf æ–¹æ³•ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™ JavaScript å°†å…¶è¿”å›ã€‚ å¦åˆ™ï¼Œè°ƒç”¨ toString æ–¹æ³•ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™ JavaScript å°†å…¶è¿”å›ã€‚ å¦åˆ™ï¼ŒJavaScript æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ã€‚ å¦‚æœæ˜¯ ToPrimitive(obj, String)ï¼Œå¤„ç†æ­¥éª¤å¦‚ä¸‹ï¼š å¦‚æœ objä¸º åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å› å¦åˆ™ï¼Œè°ƒç”¨ toString æ–¹æ³•ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™ JavaScript å°†å…¶è¿”å›ã€‚ å¦åˆ™ï¼Œè°ƒç”¨ valueOf æ–¹æ³•ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™ JavaScript å°†å…¶è¿”å›ã€‚ å¦åˆ™ï¼ŒJavaScript æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ã€‚ éšå¼è½¬æ¢åœºæ™¯ ä¸€å…ƒæ“ä½œç¬¦ +å½“ + è¿ç®—ç¬¦ä½œä¸ºä¸€å…ƒæ“ä½œç¬¦æ—¶ï¼Œä¼šè°ƒç”¨ ToNumber å¤„ç†è¯¥å€¼ï¼Œç›¸å½“äº Number(value)ã€‚ å¦‚æœ value æ˜¯å¯¹è±¡ï¼Œä¼šå…ˆè°ƒç”¨ ToPrimitive(obj, Number) æ–¹æ³•ã€‚ 123console.log(+['1']); // 1console.log(+['1', '2', '3']); // NaNconsole.log(+&#123;&#125;); // NaN äºŒå…ƒæ“ä½œç¬¦ +å½“è®¡ç®— value1 + value2 æ—¶ï¼š lprim = ToPrimitive(value1) rprim = ToPrimitive(value2) å¦‚æœ lprim æ˜¯å­—ç¬¦ä¸²æˆ–è€… rprim æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¿”å› ToString(lprim) å’Œ ToString(rprim) çš„æ‹¼æ¥ç»“æœ è¿”å› ToNumber(lprim) å’Œ ToNumber(rprim) çš„è¿ç®—ç»“æœ == ç›¸ç­‰ ç±»å‹ (x) ç±»å‹ (y) ç»“æœ null undefined true undefined null true æ•°å€¼ å­—ç¬¦ä¸² x == ToNumber(y) å­—ç¬¦ä¸² æ•°å€¼ ToNumber(x) == y å¸ƒå°”å€¼ ä»»ä½•ç±»å‹ ToNumber(x) == y ä»»ä½•ç±»å‹ å¸ƒå°”å€¼ x = ToNumber(y) å­—ç¬¦ä¸²æˆ–æ•° å¯¹è±¡ x = ToPrimitive(y) å¯¹è±¡ å­—ç¬¦ä¸²æˆ–æ•° ToPrimitive(x) == y","categories":[{"name":"JavaScript","slug":"javascript","permalink":"https://github.com/Kaviilee/blog.git/categories/javascript/"}],"tags":[]},{"title":"Git Flow","slug":"git-flow","date":"2020-09-03T09:56:17.000Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"2020/09/03/git-flow/","link":"","permalink":"https://github.com/Kaviilee/blog.git/2020/09/03/git-flow/","excerpt":"ä¹‹å‰å¶å°”çœ‹åˆ°çš„ä¸€ç¯‡æ–‡ç« ï¼Œæ˜¯è®² Git Flow çš„ï¼Œè°ˆäº†åˆ†æ”¯ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ã€‚","text":"ä¹‹å‰å¶å°”çœ‹åˆ°çš„ä¸€ç¯‡æ–‡ç« ï¼Œæ˜¯è®² Git Flow çš„ï¼Œè°ˆäº†åˆ†æ”¯ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ã€‚ Git Flowåˆ†æ”¯åº”ç”¨åœºæ™¯æ ¹æ® Git Flow çš„å»ºè®®ï¼Œä¸»è¦çš„åˆ†æ”¯æœ‰ masterã€developã€hotfixã€release ä»¥åŠ feature è¿™äº”ç§åˆ†æ”¯ï¼Œå„ç§åˆ†æ”¯è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ã€‚å…¶ä¸­ Master ä»¥åŠ Develop è¿™ä¸¤ä¸ªåˆ†æ”¯åˆè¢«ç§°ä½œé•¿æœŸåˆ†æ”¯ï¼Œå› ä¸ºä»–ä»¬ä¼šä¸€ç›´å­˜æ´»åœ¨æ•´ä¸ª Git Flow é‡Œï¼Œè€Œå…¶å®ƒçš„åˆ†æ”¯å¤§å¤šä¼šå› ä»»åŠ¡ç»“æŸè€Œè¢«åˆªé™¤ã€‚ Master åˆ†æ”¯ä¸»è¦æ˜¯ç”¨æ¥æ”¾ç¨³å®šã€éšæ—¶å¯ä¸Šçº¿çš„ç‰ˆæœ¬ã€‚è¿™ä¸ªåˆ†æ”¯çš„æ¥æºåªèƒ½ä»åˆ«çš„åˆ†æ”¯åˆå¹¶è¿‡æ¥ï¼Œå¼€å‘è€…ä¸ä¼šç›´æ¥ Commit åˆ°è¿™ä¸ªåˆ†æ”¯ã€‚å› ä¸ºæ˜¯ç¨³å®šç‰ˆæœ¬ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿä¼šåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šçš„ Commit ä¸Šæ‰“ä¸Šç‰ˆæœ¬å· tagã€‚ æ¯ä¸ªç‰ˆæœ¬å‘å¸ƒå®Œï¼Œdevelop ä¼šåˆå¹¶åˆ° masterï¼Œå¹¶æ‰“tagã€‚ Develop åˆ†æ”¯è¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯æ‰€æœ‰å¼€å‘çš„åŸºç¡€åˆ†æ”¯ï¼Œå½“è¦æ–°å¢åŠŸèƒ½çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ Feature åˆ†æ”¯éƒ½æ˜¯ä»è¿™ä¸ªåˆ†æ”¯åˆ‡å‡ºå»çš„ã€‚è€Œ Feature åˆ†æ”¯çš„åŠŸèƒ½å®Œæˆåï¼Œä¹Ÿéƒ½ä¼šåˆå¹¶å›æ¥è¿™ä¸ªåˆ†æ”¯ã€‚ å¼€å‘è¿‡ç¨‹ä¸­çš„ç¨³å®šåˆ†æ”¯ï¼Œdevelopåˆ†æ”¯åº”è¯¥ä¿è¯æ¯æ¬¡æœ€æ–°çš„commitéƒ½æ˜¯å¯ä»¥è¢«runçš„ã€‚ Hotfix åˆ†æ”¯å½“çº¿ä¸Šäº§å“å‘ç”Ÿç´§æ€¥é—®é¢˜çš„æ—¶å€™ï¼Œä¼šä» Master åˆ†æ”¯å¼€ä¸€ä¸ª Hotfix åˆ†æ”¯å‡ºæ¥è¿›è¡Œä¿®å¤ï¼ŒHotfix åˆ†æ”¯ä¿®å¤å®Œæˆä¹‹åï¼Œä¼šåˆå¹¶å› Master åˆ†æ”¯ï¼Œä¹ŸåŒæ—¶ä¼šåˆå¹¶ä¸€ä»½åˆ° Develop åˆ†æ”¯ã€‚ Release åˆ†æ”¯å½“è®¤ä¸º Develop åˆ†æ”¯å¤Ÿæˆç†Ÿäº†ï¼Œå°±å¯ä»¥æŠŠ Develop åˆ†æ”¯åˆå¹¶åˆ° Release åˆ†æ”¯ï¼Œåœ¨è¿™è¾¹è¿›è¡Œç®—æ˜¯ä¸Šçº¿å‰çš„æœ€åæµ‹è¯•ã€‚æµ‹è¯•å®Œæˆåï¼ŒRelease åˆ†æ”¯å°†ä¼šåŒæ—¶åˆå¹¶åˆ° Master ä»¥åŠ Develop è¿™ä¸¤ä¸ªåˆ†æ”¯ä¸Šã€‚ Master åˆ†æ”¯æ˜¯ä¸Šçº¿ç‰ˆæœ¬ï¼Œè€Œåˆå¹¶å› Develop åˆ†æ”¯çš„ç›®çš„ï¼Œæ˜¯å› ä¸ºå¯èƒ½åœ¨ Release åˆ†æ”¯ä¸Šè¿˜ä¼šæµ‹åˆ°å¹¶ä¿®æ­£ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦è·Ÿ Develop åˆ†æ”¯åŒæ­¥ï¼Œå…å¾—ä¹‹åçš„ç‰ˆæœ¬åˆå†åº¦å‡ºç°åŒæ ·çš„é—®é¢˜ã€‚ å…¶å®æ­£å¸¸çš„åšæ³•åº”è¯¥æ˜¯ææµ‹ï¼Œæˆ–æµ‹è¯•åˆ°æŸä¸ªé˜¶æ®µä»¥åä½¿ç”¨ã€‚ä¸€èˆ¬ç”¨åœ¨å¤šç‰ˆæœ¬å¹¶è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå……å½“ç‰¹å®šç‰ˆæœ¬çš„develop åˆ†æ”¯ä½¿ç”¨ Feature åˆ†æ”¯å½“è¦å¼€å§‹æ–°å¢åŠŸèƒ½çš„æ—¶å€™ï¼Œå°±æ˜¯ä½¿ç”¨ Feature åˆ†æ”¯çš„æ—¶å€™äº†ã€‚ Feature åˆ†æ”¯éƒ½æ˜¯ä» Develop åˆ†æ”¯æ¥çš„ï¼Œå®Œæˆä¹‹åä¼šå†å¹¶å› Develop åˆ†æ”¯ã€‚ ç›®å‰featureåˆ†æ”¯èµ·åè§„åˆ™ä»¥ dev_ å¼€å¤´ï¼Œåé¢è·Ÿå½“å‰å¼€å‘åŠŸèƒ½ åˆ†æ”¯æäº¤ä¸åˆå¹¶å¦‚æœ feature éœ€è¦ develop çš„åŠŸèƒ½ï¼Œä¸è¦å°† develop åˆ†æ”¯ merge åˆ° feature åˆ†æ”¯ï¼Œåº”è¯¥ä½¿ç”¨ feature rebase develop åˆ†æ”¯æäº¤ä½¿ç”¨ rebase æˆ– merge æ–¹å¼éƒ½å¯ä»¥ï¼Œä¸€èˆ¬æ¥è¯´commit å°‘çš„åœºæ™¯æˆ‘ä¼šæ¯”è¾ƒå–œæ¬¢ rebaseï¼Œä½†å¦‚æœcommitæ”’çš„å¤šäº†ï¼Œrebase è§£å†³å†²çªä¼šå¾ˆç´¯ã€‚ rebase æ“ä½œä¾‹å¦‚ï¼Œå¼€å§‹å¼€å‘æ—¶ï¼Œåˆ†æ”¯æ˜¯è¿™æ ·çš„ 123* -- * -- A (develop) \\ * (dev_xxx) å¼€å‘å®Œæˆï¼Œå‡†å¤‡æäº¤æ—¶ï¼š 123* -- * -- A -- B -- C -- D -- E (develop) \\ * -- X -- Y -- Z (dev_xxx) å‘½ä»¤è¡Œæ­¥éª¤å¦‚ä¸‹ï¼ˆGUIå‚è€ƒå‘½ä»¤è¡Œæ‰§è¡Œå¯¹åº”æ“ä½œï¼‰ 1234567git add .git commit -m \"xxx\"git pull //ç”¨äºæ›´æ–°è¿œç«¯åˆ†æ”¯(git fetch ä¹Ÿå¯ä»¥)git rebase origin/develop //å°†å½“å‰åˆ†æ”¯baseå˜ä¸ºdevelop çš„æœ€æ–° commit è¿™ä¸€æ­¥çš„å®é™…åŸç†æ˜¯ï¼Œgitä¼šä»developæ–°å¼€ä¸€ä¸ªåˆ†æ”¯ï¼Œå°†ä½ å½“å‰çš„dev_xxx åˆ†æ”¯çš„ commit æŒ‰ç…§æäº¤é¡ºåºæŒ¨ä¸ª cherry-pick åˆ°æ–°å¼€åˆ†æ”¯ä¸Š è¿™ä¸€æ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœ develop çš„ B C D Eç­‰commit ä¸ X Y Z å†²çªï¼Œåˆ™éœ€è¦ä¾æ¬¡è§£å†³å†²çª è§£å†³å†²çªä»¥åï¼Œæ‰§è¡Œ git rebase --continue æˆ–è€… git rebase --skip ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„ rebase rebase ç»“æŸåï¼Œåˆ†æ”¯ç»“æ„å°†å˜ä¸ºï¼š 123* -- * -- A -- B -- C -- D -- E (develop) \\ -- * -- X -- Y -- Z (dev_xxx) ç„¶åéœ€è¦æ‰§è¡Œ 1git push -f // å¿…é¡»åŠ  -f å¼ºåˆ¶æ¨é€ï¼Œå¦åˆ™ç”±äºæœ¬åœ°åˆ†æ”¯çš„baseä¸è¿œç«¯ä¸ä¸€è‡´ï¼Œä¼šæŠ¥éœ€è¦ git pull æ— æ³•æäº¤ æäº¤å®Œæˆåå» gitlab åˆ›å»º merge requestï¼Œèµ°æ­£å¸¸ review æµç¨‹ï¼Œåˆå¹¶ä»£ç ã€‚ æœ¬æ–‡è½¬è½½è‡ª å†èŠ Git Flow","categories":[],"tags":[{"name":"git","slug":"git","permalink":"https://github.com/Kaviilee/blog.git/tags/git/"}]},{"title":"ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—","slug":"ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—","date":"2020-08-18T11:31:47.000Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"2020/08/18/ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—/","link":"","permalink":"https://github.com/Kaviilee/blog.git/2020/08/18/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%88%E6%8E%92%E7%89%88%E6%8C%87%E5%8C%97/","excerpt":"ä»Šå¤©åœ¨çœ‹æ–‡æ¡£çš„æ—¶å€™ï¼Œå¶ç„¶çœ‹åˆ°è¿™ç¯‡å…³äºä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆå»ºè®®çš„æ–‡ç« ï¼Œè§‰å¾—å¯ä»¥åˆ†äº«å‡ºæ¥~","text":"ä»Šå¤©åœ¨çœ‹æ–‡æ¡£çš„æ—¶å€™ï¼Œå¶ç„¶çœ‹åˆ°è¿™ç¯‡å…³äºä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆå»ºè®®çš„æ–‡ç« ï¼Œè§‰å¾—å¯ä»¥åˆ†äº«å‡ºæ¥~ ç©ºæ ¼ã€Œæœ‰ç ”ç©¶æ˜¾ç¤ºï¼Œæ‰“å­—çš„æ—¶å€™ä¸å–œæ¬¢åœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´åŠ ç©ºæ ¼çš„äººï¼Œæ„Ÿæƒ…è·¯éƒ½èµ°å¾—å¾ˆè¾›è‹¦ï¼Œæœ‰ä¸ƒæˆçš„æ¯”ä¾‹ä¼šåœ¨ 34 å²çš„æ—¶å€™è·Ÿè‡ªå·±ä¸çˆ±çš„äººç»“å©šï¼Œè€Œå…¶ä½™ä¸‰æˆçš„äººæœ€ååªèƒ½æŠŠé—äº§ç•™ç»™è‡ªå·±çš„çŒ«ã€‚æ¯•ç«Ÿçˆ±æƒ…è·Ÿä¹¦å†™éƒ½éœ€è¦é€‚æ—¶åœ°ç•™ç™½ã€‚ ä¸å¤§å®¶å…±å‹‰ä¹‹ã€‚ã€â€”â€”vinta/paranoid-auto-spacing ä¸­è‹±æ–‡ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼æ­£ç¡®ï¼š åœ¨ LeanCloud ä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»• AVObject è¿›è¡Œçš„ã€‚ é”™è¯¯ï¼š åœ¨LeanCloudä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»•AVObjectè¿›è¡Œçš„ã€‚ åœ¨ LeanCloudä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»•AVObject è¿›è¡Œçš„ã€‚ å®Œæ•´çš„æ­£ç¡®ç”¨æ³•ï¼š åœ¨ LeanCloud ä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»• AVObject è¿›è¡Œçš„ã€‚æ¯ä¸ª AVObject éƒ½åŒ…å«äº†ä¸ JSON å…¼å®¹çš„ key-value å¯¹åº”çš„æ•°æ®ã€‚æ•°æ®æ˜¯ schema-free çš„ï¼Œä½ ä¸éœ€è¦åœ¨æ¯ä¸ª AVObject ä¸Šæå‰æŒ‡å®šå­˜åœ¨å“ªäº›é”®ï¼Œåªè¦ç›´æ¥è®¾å®šå¯¹åº”çš„ key-value å³å¯ã€‚ ä¾‹å¤–ï¼šã€Œè±†ç“£FMã€ç­‰äº§å“åè¯ï¼ŒæŒ‰ç…§å®˜æ–¹æ‰€å®šä¹‰çš„æ ¼å¼ä¹¦å†™ã€‚ ä¸­æ–‡ä¸æ•°å­—ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼æ­£ç¡®ï¼š ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº† 5000 å…ƒã€‚ é”™è¯¯ï¼š ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº† 5000å…ƒã€‚ ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº†5000å…ƒã€‚ æ•°å­—ä¸å•ä½ä¹‹é—´æ— éœ€å¢åŠ ç©ºæ ¼æ­£ç¡®ï¼š æˆ‘å®¶çš„å…‰çº¤å…¥æˆ·å®½å¸¦æœ‰ 10Gbpsï¼ŒSSD ä¸€å…±æœ‰ 10TBã€‚ é”™è¯¯ï¼š æˆ‘å®¶çš„å…‰çº¤å…¥æˆ·å®½å¸¦æœ‰ 10 Gbpsï¼ŒSSD ä¸€å…±æœ‰ 20 TBã€‚ å¦å¤–ï¼Œåº¦ï¼ç™¾åˆ†æ¯”ä¸æ•°å­—ä¹‹é—´ä¸éœ€è¦å¢åŠ ç©ºæ ¼ï¼š æ­£ç¡®ï¼š ä»Šå¤©æ˜¯ 233Â° çš„é«˜æ¸©ã€‚ æ–° MacBook Pro æœ‰ 15% çš„ CPU æ€§èƒ½æå‡ã€‚ é”™è¯¯ï¼š ä»Šå¤©æ˜¯ 233 Â° çš„é«˜æ¸©ã€‚ æ–° MacBook Pro æœ‰ 15 % çš„ CPU æ€§èƒ½æå‡ã€‚ å…¨è§’æ ‡ç‚¹ä¸å…¶ä»–å­—ç¬¦ä¹‹é—´ä¸åŠ ç©ºæ ¼æ­£ç¡®ï¼š åˆšåˆšä¹°äº†ä¸€éƒ¨ iPhoneï¼Œå¥½å¼€å¿ƒï¼ é”™è¯¯ï¼š åˆšåˆšä¹°äº†ä¸€éƒ¨ iPhone ï¼Œå¥½å¼€å¿ƒï¼ -ms-text-autospace to the rescue?Microsoft æœ‰ä¸ª -ms-text-autospace çš„ CSS å±æ€§å¯ä»¥å®ç°è‡ªåŠ¨ä¸ºä¸­è‹±æ–‡ä¹‹é—´å¢åŠ ç©ºç™½ã€‚ä¸è¿‡ç›®å‰å¹¶æœªæ™®åŠï¼Œå¦å¤–åœ¨å…¶ä»–åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ OS Xã€iOS çš„ç”¨æˆ·ç•Œé¢ç›®å‰å¹¶ä¸å­˜åœ¨è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥è¯·ç»§ç»­ä¿æŒéšæ‰‹åŠ ç©ºæ ¼çš„ä¹ æƒ¯ã€‚ æ ‡ç‚¹ç¬¦å·ä¸é‡å¤ä½¿ç”¨æ ‡ç‚¹ç¬¦å·æ­£ç¡®ï¼š å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼ å¥¹ç«Ÿç„¶å¯¹ä½ è¯´ã€Œå–µã€ï¼Ÿï¼ é”™è¯¯ï¼š å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼ï¼ å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ å¥¹ç«Ÿç„¶å¯¹ä½ è¯´ã€Œå–µã€ï¼Ÿï¼Ÿï¼ï¼ å¥¹ç«Ÿç„¶å¯¹ä½ è¯´ã€Œå–µã€ï¼Ÿï¼ï¼Ÿï¼ï¼Ÿï¼Ÿï¼ï¼ å…¨è§’å’ŒåŠè§’ä¸æ˜ç™½ä»€ä¹ˆæ˜¯å…¨è§’ï¼ˆå…¨å½¢ï¼‰ä¸åŠè§’ï¼ˆåŠå½¢ï¼‰ç¬¦å·ï¼Ÿè¯·æŸ¥çœ‹ç»´åŸºç™¾ç§‘è¯æ¡ã€å…¨è§’å’ŒåŠè§’ã€ã€‚ ä½¿ç”¨å…¨è§’ä¸­æ–‡æ ‡ç‚¹æ­£ç¡®ï¼š å—¨ï¼ä½ çŸ¥é“å˜›ï¼Ÿä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´ã€Œå–µã€äº†å“ï¼ æ ¸ç£å…±æŒ¯æˆåƒï¼ˆNMRIï¼‰æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“ï¼ŸJFGIï¼ é”™è¯¯ï¼š å—¨! ä½ çŸ¥é“å˜›? ä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´ â€œå–µâ€ äº†å“! å—¨!ä½ çŸ¥é“å˜›?ä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´â€å–µâ€äº†å“! æ ¸ç£å…±æŒ¯æˆåƒ (NMRI) æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“? JFGI! æ ¸ç£å…±æŒ¯æˆåƒ(NMRI)æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“?JFGI! æ•°å­—ä½¿ç”¨åŠè§’å­—ç¬¦æ­£ç¡®ï¼š è¿™ä»¶è›‹ç³•åªå– 1000 å…ƒã€‚ é”™è¯¯ï¼š è¿™ä»¶è›‹ç³•åªå– ï¼‘ï¼ï¼ï¼ å…ƒã€‚ ä¾‹å¤–ï¼šåœ¨è®¾è®¡ç¨¿ã€å®£ä¼ æµ·æŠ¥ä¸­å¦‚å‡ºç°æå°‘é‡æ•°å­—çš„æƒ…å½¢æ—¶ï¼Œä¸ºæ–¹ä¾¿æ–‡å­—å¯¹é½ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨å…¨è§’æ•°å­—çš„ã€‚ é‡åˆ°å®Œæ•´çš„è‹±æ–‡æ•´å¥ã€ç‰¹æ®Šåè¯ï¼Œå…¶å…§å®¹ä½¿ç”¨åŠè§’æ ‡ç‚¹æ­£ç¡®ï¼š ä¹”å¸ƒæ–¯é‚£å¥è¯æ˜¯æ€ä¹ˆè¯´çš„ï¼Ÿã€ŒStay hungry, stay foolish.ã€ æ¨èä½ é˜…è¯»ã€ŠHackers &amp; Painters: Big Ideas from the Computer Ageã€‹ï¼Œéå¸¸çš„æœ‰è¶£ã€‚ é”™è¯¯ï¼š ä¹”å¸ƒæ–¯é‚£å¥è¯æ˜¯æ€ä¹ˆè¯´çš„ï¼Ÿã€ŒStay hungryï¼Œstay foolishã€‚ã€ æ¨èä½ é˜…è¯»ã€ŠHackersï¼†Paintersï¼šBig Ideas from the Computer Ageã€‹ï¼Œéå¸¸çš„æœ‰è¶£ã€‚ åè¯ä¸“æœ‰åè¯ä½¿ç”¨æ­£ç¡®çš„å¤§å°å†™å¤§å°å†™ç›¸å…³ç”¨æ³•åŸå±äºè‹±æ–‡ä¹¦å†™èŒƒç•´ï¼Œä¸å±äºæœ¬ wiki è®¨è®ºå…§å®¹ï¼Œåœ¨è¿™é‡Œåªå¯¹éƒ¨åˆ†æ˜“é”™ç”¨æ³•è¿›è¡Œç®€è¿°ã€‚ æ­£ç¡®ï¼š ä½¿ç”¨ GitHub ç™»å½• æˆ‘ä»¬çš„å®¢æˆ·æœ‰ GitHubã€Foursquareã€Microsoft Corporationã€Googleã€Facebook, Inc.ã€‚ é”™è¯¯ï¼š ä½¿ç”¨ github ç™»å½• ä½¿ç”¨ GITHUB ç™»å½• ä½¿ç”¨ Github ç™»å½• ä½¿ç”¨ gitHub ç™»å½• ä½¿ç”¨ gï½²ã‚“Ä¤Ğ¦8 ç™»å½• æˆ‘ä»¬çš„å®¢æˆ·æœ‰ githubã€foursquareã€microsoft corporationã€googleã€facebook, inc.ã€‚ æˆ‘ä»¬çš„å®¢æˆ·æœ‰ GITHUBã€FOURSQUAREã€MICROSOFT CORPORATIONã€GOOGLEã€FACEBOOK, INC.ã€‚ æˆ‘ä»¬çš„å®¢æˆ·æœ‰ Githubã€FourSquareã€MicroSoft Corporationã€Googleã€FaceBook, Inc.ã€‚ æˆ‘ä»¬çš„å®¢æˆ·æœ‰ gitHubã€fourSquareã€microSoft Corporationã€googleã€faceBook, Inc.ã€‚ æˆ‘ä»¬çš„å®¢æˆ·æœ‰ gï½²ã‚“Ä¤Ğ¦8ã€ï½·ouĞ¯Æ§quï¾‘Ğ³Ñ”ã€à¹“à¹€Ï‚Ğ³à¹à¸£à¹Å¦t Ï‚à¹Ğ³×§à¹Ğ³à¸„tà¹€à¹à¸ nã€900913ã€Æ’4á„ƒÃ«Ğ²à¹à¹Ğº, IĞŸá„ƒ.ã€‚ æ³¨æ„ï¼šå½“ç½‘é¡µä¸­éœ€è¦é…åˆæ•´ä½“è§†è§‰é£æ ¼è€Œå‡ºç°å…¨éƒ¨å¤§å†™ï¼å°å†™çš„æƒ…å½¢ï¼ŒHTML ä¸­è¯·ä½¿ç”¨æ ‡å‡†çš„å¤§å°å†™è§„èŒƒè¿›è¡Œä¹¦å†™ï¼›å¹¶é€šè¿‡ text-transform: uppercase;ï¼text-transform: lowercase; å¯¹è¡¨ç°å½¢å¼è¿›è¡Œå®šä¹‰ã€‚ ä¸è¦ä½¿ç”¨ä¸åœ°é“çš„ç¼©å†™æ­£ç¡®ï¼š æˆ‘ä»¬éœ€è¦ä¸€ä½ç†Ÿæ‚‰ JavaScriptã€HTML5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ Backbone.jsã€AngularJSã€React ç­‰ï¼‰çš„å‰ç«¯å¼€å‘è€…ã€‚ é”™è¯¯ï¼š æˆ‘ä»¬éœ€è¦ä¸€ä½ç†Ÿæ‚‰ Jsã€h5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ backboneã€angularã€RJS ç­‰ï¼‰çš„ FEDã€‚ äº‰è®®ä»¥ä¸‹ç”¨æ³•ç•¥å¸¦æœ‰ä¸ªäººè‰²å½©ï¼Œå³ï¼šæ— è®ºæ˜¯å¦éµå¾ªä¸‹è¿°è§„åˆ™ï¼Œä»è¯­æ³•çš„è§’åº¦æ¥è®²éƒ½æ˜¯æ­£ç¡®çš„ã€‚ é“¾æ¥ä¹‹é—´å¢åŠ ç©ºæ ¼ç”¨æ³•ï¼š è¯· æäº¤ä¸€ä¸ª issue å¹¶åˆ†é…ç»™ç›¸å…³åŒäº‹ã€‚ è®¿é—®æˆ‘ä»¬ç½‘ç«™çš„æœ€æ–°åŠ¨æ€ï¼Œè¯· ç‚¹å‡»è¿™é‡Œ è¿›è¡Œè®¢é˜…ï¼ å¯¹æ¯”ç”¨æ³•ï¼š è¯·æäº¤ä¸€ä¸ª issue å¹¶åˆ†é…ç»™ç›¸å…³åŒäº‹ã€‚ è®¿é—®æˆ‘ä»¬ç½‘ç«™çš„æœ€æ–°åŠ¨æ€ï¼Œè¯·ç‚¹å‡»è¿™é‡Œè¿›è¡Œè®¢é˜…ï¼ ç®€ä½“ä¸­æ–‡ä½¿ç”¨ç›´è§’å¼•å·ç”¨æ³•ï¼š ã€Œè€å¸ˆï¼Œã€æœ‰æ¡ä¸ç´Šã€çš„ã€ç´Šã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿã€ å¯¹æ¯”ç”¨æ³•ï¼š â€œè€å¸ˆï¼Œâ€˜æœ‰æ¡ä¸ç´Šâ€™çš„â€˜ç´Šâ€™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿâ€ æœ¬æ–‡å±äºæ‘˜å½•ï¼Œæ›´å¤šå†…å®¹åœ¨ chinese-copywriting-guidelines ~","categories":[],"tags":[{"name":"æ–‡æ¡£æ’ç‰ˆ","slug":"æ–‡æ¡£æ’ç‰ˆ","permalink":"https://github.com/Kaviilee/blog.git/tags/%E6%96%87%E6%A1%A3%E6%8E%92%E7%89%88/"}]},{"title":"Docker å­¦ä¹ ç¬”è®°","slug":"docker","date":"2020-07-21T00:03:15.000Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"2020/07/21/docker/","link":"","permalink":"https://github.com/Kaviilee/blog.git/2020/07/21/docker/","excerpt":"è¿™æ˜¯åœ¨çœ‹å®Œç‹‚ç¥çš„ Docker è§†é¢‘ä¹‹ååšçš„ç¬”è®°~å­˜æ¡£ç”¨","text":"è¿™æ˜¯åœ¨çœ‹å®Œç‹‚ç¥çš„ Docker è§†é¢‘ä¹‹ååšçš„ç¬”è®°~å­˜æ¡£ç”¨ Docker æ¦‚è¿°Docekr ä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸€æ¬¾äº§å“æœ‰å¼€å‘å’Œç”Ÿäº§ä¸¤å¥—ç¯å¢ƒï¼Œä¹Ÿå°±å¯¹åº”ä¸¤å¥—åº”ç”¨é…ç½®ï¼Œä¸€èˆ¬å°±ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ã€‚ å¼€å‘å’Œè¿ç»´é—®é¢˜ï¼šè¿™ä¸ªé¡¹ç›®åœ¨æˆ‘çš„ç”µè„‘ä¸Šæ˜¯å¯ä»¥è¿è¡Œçš„ï¼ä½†æ˜¯ä¼´éšç‰ˆæœ¬æ›´æ–°è¿­ä»£ï¼Œä¸åŒç‰ˆæœ¬ç¯å¢ƒçš„å…¼å®¹ï¼Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚ ç¯å¢ƒé…ç½®é—®é¢˜ï¼šç¯å¢ƒé…ç½®æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œæ¯ä¸ªæœºå™¨éƒ½è¦éƒ¨ç½²ç¯å¢ƒï¼Œè´¹æ—¶è´¹åŠ›ã€‚ æ€è€ƒï¼šé¡¹ç›®æ˜¯å¦å¯ä»¥å¸¦ä¸Šç¯å¢ƒä¸€èµ·å®‰è£…æ‰“åŒ…ï¼ŸæŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥ï¼Ÿ åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ååˆ†éº»çƒ¦ï¼Œä¸èƒ½è·¨å¹³å°ã€‚ ä¼ ç»Ÿå¼€å‘ï¼šå¼€å‘äººå‘˜åšé¡¹ç›®ã€‚è¿ç»´äººå‘˜åšéƒ¨ç½² ç°åœ¨ï¼šå¼€å‘æ‰“åŒ…éƒ¨ç½²ä¸Šçº¿ï¼Œä¸€èµ·åš Docker èƒ½å¹²ä»€ä¹ˆï¼Ÿ ä¹‹å‰çš„è™šæ‹ŸæœºæŠ€æœ¯ï¼Œæ‰€æœ‰çš„é¡¹ç›®éƒ½åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸‹è¿è¡Œã€‚ è™šæ‹Ÿæœºçš„ç¼ºç‚¹ 1231.å ç”¨èµ„æºéå¸¸å¤š2.å†—ä½™æŠ€æœ¯å¤š3.å¯åŠ¨å¾ˆæ…¢ å®¹å™¨åŒ–æŠ€æœ¯ å®¹å™¨åŒ–æŠ€æœ¯ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿ æ¯”è¾ƒ Docker å’Œè™šæ‹ŸæœºæŠ€æœ¯çš„ä¸åŒ ä¼ ç»Ÿçš„è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶ï¼› å®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…æ ¸ï¼Œå®¹å™¨æ˜¯æ²¡æœ‰è‡ªå·±çš„å†…æ ¸çš„ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿï¼Œæ›´åŠ è½»ä¾¿ï¼› æ¯ä¸ªå®¹å™¨é—´éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œäº’ä¸å½±å“ï¼Œèƒ½åŒºåˆ†è®¡ç®—èµ„æºã€‚ DevOps (å¼€å‘ï¼Œè¿ç»´) æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½² ä¼ ç»Ÿï¼šä¸€å †å¸®åŠ©æ–‡æ¡£ï¼Œå®‰è£…ç¨‹åº Dockerï¼šä¸€é”®è¿è¡Œæ‰“åŒ…é•œåƒå‘å¸ƒæµ‹è¯• æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹ ä½¿ç”¨äº† Docker ä¹‹å,æˆ‘ä»¬éƒ¨ç½²åº”ç”¨å°±åƒæ­ç§¯æœ¨ä¸€æ ·! é¡¹ç›®æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒï¼Œæ‰©å±•ï¼Œå¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²ã€‚ æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´ åœ¨å®¹å™¨åŒ–ä¹‹åï¼Œæˆ‘ä»¬å¼€å‘ï¼Œæµ‹è¯•ç¯å¢ƒæ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚ æ›´é«˜æ•ˆçš„è®¡ç®—æœºèµ„æºåˆ©ç”¨ Docker æ˜¯å†…æ ¸çº§åˆ«çš„è™šæ‹ŸåŒ–ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç‰©ç†æœºä¸Šè¿è¡Œå¾ˆå¤šçš„å®¹å™¨å®ä¾‹ï¼ŒæœåŠ¡å™¨æ€§èƒ½å¯ä»¥è¢«å‹æ¦¨åˆ°æè‡´ã€‚ Docker å®‰è£…Docker çš„åŸºæœ¬ç»„æˆ é•œåƒ (image) Docker é•œåƒå¥½æ¯”ä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡ nginx é•œåƒ =&gt; run =&gt; nginx01 (æä¾›æœåŠ¡å™¨)ã€‚ é€šè¿‡è¿™ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨(æœ€ç»ˆæœåŠ¡è¿è¡Œæˆ–è€…é¡¹ç›®è¿è¡Œå°±æ˜¯åœ¨å®¹å™¨ä¸­çš„)ã€‚ å®¹å™¨ (container) Docker åˆ©ç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œé€šè¿‡é•œåƒæ¥åˆ›å»º å®¹å™¨å’Œé•œåƒå…³ç³»ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¯¹è±¡å’Œç±»ã€‚ ä»“åº“(repository) ä»“åº“å°±æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œä»“åº“åˆ†ä¸ºå…±æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ã€‚ Docker hubï¼ˆé»˜è®¤å›½å¤–é•œåƒï¼‰ï¼Œé˜¿é‡Œäº‘ï¼Œç½‘æ˜“æœ‰å›½å†…é•œåƒåŠ é€ŸæœåŠ¡ã€‚ å®‰è£… DockerCentOS Docker å®‰è£… ç¯å¢ƒå‡†å¤‡ ä¼šä¸€ç‚¹ Linux åŸºç¡€ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿ CentOS7 ä½¿ç”¨ XShell è¿æ¥è¿œç¨‹æœåŠ¡å™¨ ç¯å¢ƒæŸ¥çœ‹ 123# æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸# uname -r3.10.0-1062.18.1.el7.x86_64 1234567891011121314151617#ç³»ç»Ÿç‰ˆæœ¬# cat /etc/os-releaseNAME=\"CentOS Linux\"VERSION=\"7 (Core)\"ID=\"centos\"ID_LIKE=\"rhel fedora\"VERSION_ID=\"7\"PRETTY_NAME=\"CentOS Linux 7 (Core)\"ANSI_COLOR=\"0;31\"CPE_NAME=\"cpe:/o:centos:centos:7\"HOME_URL=\"https://www.centos.org/\"BUG_REPORT_URL=\"https://bugs.centos.org/\"CENTOS_MANTISBT_PROJECT=\"CentOS-7\"CENTOS_MANTISBT_PROJECT_VERSION=\"7\"REDHAT_SUPPORT_PRODUCT=\"centos\"REDHAT_SUPPORT_PRODUCT_VERSION=\"7\" å®‰è£… Docker 12345678910111213141516171819202122232425262728293031# ä¸€, å¸è½½æ—§çš„ç‰ˆæœ¬$ sudo yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-engine # 2, éœ€è¦å®‰è£…çš„åŒ…yum install -y yum-utils \\ device-mapper-persistent-data \\ lvm2#3. è®¾ç½®é•œåƒä»“åº“yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo #é»˜è®¤æ˜¯å›½å¤–çš„yum-config-manager \\ --add-repo \\ https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo #æ¨èä½¿ç”¨#æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•yum makecache fast#å®‰è£… docker sudo yum install docker-ce docker-ce-cli containerd.io #å¯åŠ¨ dockersystemctl start docker#æŸ¥çœ‹ docker ç‰ˆæœ¬docker version ä¸‹è½½é•œåƒ docker pull [è¦ä¸‹è½½çš„é•œåƒ] æŸ¥çœ‹ä¸‹è½½çš„é•œåƒ docker images (docker image ls) å¸è½½ docker 123yum remove docker-ce docker-ce-cli containerd.iorm -rf &#x2F;var&#x2F;lib&#x2F;docker #docker é»˜è®¤å·¥ä½œè·¯å¾„ Windows Docker å®‰è£…ï¼ˆwin10ï¼‰ä¸‹è½½å®˜æ–¹ Docker-desktop å®‰è£…ç¨‹åº https://www.docker.com/products/docker-desktop å¼€å¯ Hyper-V 1234# å¼€å¯æœç´¢win + s# è¾“å…¥å¯ç”¨æˆ–å…³é—­windowsåŠŸèƒ½ é€‰ä¸­ Hyper-V é…ç½®é•œåƒåŠ é€Ÿ åº•å±‚åŸç†Docker æ˜¯æ€ä¹ˆå·¥ä½œçš„ Docker æ˜¯ä¸€ä¸ª C/S ç»“æ„çš„ç³»ç»Ÿï¼ŒDocker çš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡ Socket ä»å®¢æˆ·ç«¯è®¿é—® DockerServer æ¥æ”¶åˆ° Docker-Client çš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ Docker ä¸ºä»€ä¹ˆæ¯” VM å¿«ï¼Ÿ Docker æœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ Dcoker åˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼ŒVM éœ€è¦çš„æ˜¯ Guest OS æ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼ŒDocker ä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œè™šæ‹Ÿæœºæ˜¯åŠ è½½ Guest OSï¼Œåˆ†é’Ÿçº§åˆ«çš„ï¼Œè€Œ Docker æ˜¯åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œçœç•¥äº†è¿™ä¸ªå¤æ‚çš„è¿‡ç¨‹ Docker å‘½ä»¤å¸®åŠ©å‘½ä»¤123docker version #dockerç‰ˆæœ¬docker info #æ˜¾ç¤ºdockerçš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨æ•°é‡docker [å‘½ä»¤] --help #æŸ¥çœ‹æŸä¸ªå…·ä½“çš„å‘½ä»¤ é•œåƒå‘½ä»¤docker images æŸ¥çœ‹ä¸‹è½½çš„æ‰€æœ‰é•œåƒ 1234567891011121314151617# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmysql 5.6 8de95e6026c3 20 hours ago 302MBredis latest 36304d3b4540 12 days ago 104MBmysql latest 30f937e841c8 2 weeks ago 541MBcentos/mysql-57-centos7 latest f83a2938370c 8 months ago 452MB# è§£é‡ŠREPOSITORY é•œåƒçš„ä»“åº“åTAG é•œåƒçš„æ ‡ç­¾IMAGE ID é•œåƒIDCREATED é•œåƒåˆ›å»ºæ—¶é—´SIZE é•œåƒçš„å¤§å°#å¯é€‰é¡¹Options: -a, --all #åˆ—å‡ºæ‰€æœ‰é•œåƒ -q, --quiet #åªæ˜¾ç¤ºé•œåƒID docker search æœç´¢é•œåƒ 123456docker search mysqlNAME DESCRIPTION STARS OFFICIAL AUTOMATED mysql MySQL is a widely used, open-source relationâ€¦ 9604 [OK] #å¯é€‰é¡¹,é€šè¿‡æ”¶è—æ¥è¿‡æ»¤--filter=stars=3000 #æœç´¢å‡ºæ¥çš„é•œåƒæ”¶è—å°±æ˜¯å¤§äº3000çš„ docker pull æ‹‰å–é•œåƒ 12345678910111213docker pull nginx [:tag]Using default tag: latest #å¦‚æœä¸å†™tag é»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬latest: Pulling from library/nginx8559a31e96f4: Pull complete #åˆ†å±‚ä¸‹è½½,docker imageæ ¸å¿ƒ è”åˆæ–‡ä»¶ç³»ç»Ÿ8d69e59170f7: Pull complete 3f9f1ec1d262: Pull complete d1f5ff4f210d: Pull complete 1e22bfa8652e: Pull complete Digest: sha256:21f32f6c08406306d822a0e6e8b7dc81f53f336570e852e25fbe1e3e3d0d0133 #ç­¾åStatus: Downloaded newer image for nginx:latestdocker.io/library/nginx:latest #çœŸå®åœ°å€# docker pull nginx ç­‰ä»·äº dicker pull docker.io/library/nginx:latest docker rmi åˆ é™¤é•œåƒ 123456# åˆ é™¤æŒ‡å®šçš„é•œåƒ$ docker rmi -f 8de95e6026c3 # åˆ é™¤å…¨éƒ¨çš„é•œåƒ$ docker rmi -f $(docker images -ap)# æ¸…ç©ºä¸´æ—¶é•œåƒ$ docker rmi $(docker images -q -f dangling=true) docker build ä½¿ç”¨dockerfileåˆ›å»ºé•œåƒ 123# ä½¿ç”¨å½“å‰ç›®å½•çš„ dockerfile åˆ›å»ºé•œåƒ å½“ dockerfile çš„å‘½åä¸º dockerfile å°±ä¸éœ€è¦åˆ¶å®šæ–‡ä»¶å -f$ docker build -t node:10.15-alpine .$ docker build -f /path/to/a/dockerfile . # /path/to/a å®¹å™¨å‘½ä»¤æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨ 12345678docker run [options] image# options# è‹¥imageæœ¬åœ°æ²¡æœ‰åˆ™ä¼šå» dockeré•œåƒåº“æ‹‰å–--name=\"\" å®¹å™¨åå­— ç”¨äºåŒºåˆ†å®¹å™¨-d åå°æ–¹å¼è¿è¡Œ-it ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œ,è¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹-p æŒ‡å®šå®¹å™¨çš„ç«¯å£ -p 80:8080 ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£-P(å¤§å†™) éšæœºæŒ‡å®šç«¯å£ åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨ 12345678910# docker ps å‘½ä»¤ åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨# options-a # åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨+å†å²è¿è¡Œè¿‡çš„å®¹å™¨-n=? # æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨-q # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES$ docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES919e58ff5521 redis \"Docker-entrypoint.sâ€¦\" 20 hours ago Exited (0) 16 hours ago redis é€€å‡ºå®¹å™¨ 1exit #ç›´æ¥å®¹å™¨åœæ­¢å¹¶é€€å‡º åˆ é™¤å®¹å™¨ 12$ docker rm å®¹å™¨id$ docker rm -f $(docker ps -aq) #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ å¯åŠ¨å’Œåœæ­¢å®¹å™¨ 1234$ docker start å®¹å™¨id or å®¹å™¨name # å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨$ docker restart å®¹å™¨id or å®¹å™¨name # é‡å¯å®¹å™¨$ docker stop å®¹å™¨id or å®¹å™¨name # åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨$ docker kill å®¹å™¨id or å®¹å™¨name # æ€æ‰è¿è¡Œä¸­çš„å®¹å™¨ å…¶ä»–å¸¸ç”¨å‘½ä»¤åå°å¯åŠ¨å®¹å™¨ 1$ docker run -d é•œåƒå æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯ 1$ docker top å®¹å™¨id æŸ¥çœ‹é•œåƒå…ƒæ•°æ® 1$ docker inspect å®¹å™¨id or å®¹å™¨name è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ 12345678#æˆ‘ä»¬é€šå¸¸å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°æ–¹å¼è¿è¡Œçš„,éœ€è¦è¿›å…¥å®¹å™¨,ä¿®æ”¹ä¸€äº›é…ç½®#å‘½ä»¤# è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯,å¯ä»¥åœ¨é‡Œé¢æ“ä½œ(å¸¸ç”¨) é€€å‡º shell ä¸ä¼šå¯¼è‡´å®¹å™¨åœæ­¢è¿è¡Œ$ docker exec -it å®¹å™¨id or name bashshell é»˜è®¤å‘½ä»¤è¡Œ# è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯,ä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ å¦‚æœé€€å‡º shellï¼Œå®¹å™¨ä¼šåœæ­¢è¿è¡Œ$ docker attach å®¹å™¨id or å®¹å™¨name ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š 1$ docker cp å®¹å™¨id: å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„ docker systemå‘½ä»¤ 12345# æŸ¥çœ‹dockerç£ç›˜å ç”¨æƒ…å†µ$ docker system df# å‘½ä»¤å¯ä»¥ç”¨äºæ¸…ç†ç£ç›˜ï¼Œåˆ é™¤å…³é—­çš„å®¹å™¨ã€æ— ç”¨çš„æ•°æ®å·å’Œç½‘ç»œ$ docker system prune-a # æ²¡æœ‰å®¹å™¨ä½¿ç”¨çš„ docker å®¹å™¨éƒ½åˆ é™¤ æ‰‹åŠ¨æ¸…é™¤ docker é•œåƒ/å®¹å™¨/æ•°æ®å· 1234# åˆ é™¤æ‰€æœ‰ dangling é•œåƒ(å³æ—  tag çš„é•œåƒ)$ docker rmi $(docker images | grep \"^&lt;none&gt;\" | awk \"&#123;print $3&#125;\")# åˆ é™¤æ‰€æœ‰ dangling æ•°æ®å·(å³æ— ç”¨çš„ volume)$ docker volume rm $(docker volume ls -qf dangling=true) Docker é•œåƒé•œåƒæ˜¯ä»€ä¹ˆé•œåƒå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œå¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ï¼Œè¿è¡Œæ—¶ï¼Œåº“ï¼Œç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚ å¦‚ä½•å¾—åˆ°é•œåƒ ä»è¿œå¤„ä»“åº“ä¸‹è½½ æ‹·è´ è‡ªå·±åˆ¶ä½œä¸€ä¸ªé•œåƒ dockerfile docker é•œåƒåŠ è½½åŸç† UnionFs (è”åˆæ–‡ä»¶ç³»ç»ŸæŸ¥è¯¢) æˆ‘ä»¬ä¸‹è½½çš„æ—¶å€™çœ‹åˆ°çš„ä¸€å±‚ä¸€å±‚å°±æ˜¯è¿™ä¸ª UnionFs (è”åˆæ–‡ä»¶ç³»ç»Ÿ): Union æ–‡ä»¶ç³»ç»Ÿ(UnionFS)æ˜¯ä¸€ç§åˆ†å±‚,è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿ,å®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ,åŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹, Union æ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€,é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿,åŸºäºåŸºç¡€é•œåƒ(æ²¡æœ‰çˆ¶é•œåƒ),å¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒ ç‰¹æ€§: ä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿ,ä½†ä»å¤–é¢çœ‹èµ·æ¥,åªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ,è”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥,è¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„ Docker é•œåƒåŠ è½½åŸç† Docker çš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆ,è¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFS bootfs(boot file system)ä¸»è¦åŒ…å« bootlloader å’Œ kernel, bootfs ä¸»è¦æ˜¯å¼•å¯¼åŠ è½½ kernel, Linux åˆšå¯åŠ¨æ—¶ä¼šåŠ è½½ bootfs æ–‡ä»¶ç³»ç»Ÿ,åœ¨ Docker é•œåƒçš„æœ€åº•å±‚æ˜¯ bootfs, è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„ Linux/Unix ç³»ç»Ÿæ˜¯ä¸€æ ·çš„,åŒ…å« boot åŠ è½½å™¨å’Œå†…æ ¸,å½“ boot åŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±åœ¨å†…å­˜ä¸­äº†,æ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”± bootfa è½¬äº¤ç»™å†…æ ¸,æ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½ bootfs rootfs(root file system)ï¼Œåœ¨ bootfs ä¹‹ä¸Šï¼ŒåŒ…å«çš„å°±æ˜¯å…¸å‹ Linux ç³»ç»Ÿä¸­çš„ /dev, /proc,/bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶, rootfs å°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆ,æ¯”å¦‚ Ubuntu, CentOS ç­‰ç­‰ åˆ†å±‚ç†è§£é•œåƒä¸‹è½½çš„æ—¶å€™æ˜¯ä¸€å±‚ä¸€å±‚çš„åœ¨ä¸‹è½½ æ€è€ƒ: ä¸ºä»€ä¹ˆ Docker é•œåƒè¦é‡‡ç”¨è¿™ç§åˆ†å±‚çš„ç»“æ„å‘¢? æœ€å¤§å¥½å¤„,æˆ‘è§‰å¾—è«è¿‡äºèµ„æºå…±äº«äº†!æ¯”å¦‚æœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„ Base é•œåƒæ„å»ºè€Œæ¥,é‚£ä¹ˆå®¿ä¸»æœº åªéœ€åœ¨ç£ç›˜ä¸Šä¿ç•™ä¸€ä»½ Base é•œåƒ,åŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€è¦åŠ è½½ä¸€ä»½ Base é•œåƒ,è¿™æ ·å°±å¯ä»¥ä¸ºæ‰€æœ‰çš„å®¹å™¨æœåŠ¡äº†,è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº« æŸ¥çœ‹é•œåƒåˆ†å±‚çš„æ–¹å¼å¯ä»¥é€šè¿‡ Docker image inspect å‘½ä»¤! commit é•œåƒ1234$ docker commit æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ#å‘½ä»¤å’ŒgitåŸç†ç±»ä¼¼$ docker commit -m=\"æäº¤çš„æè¿°ä¿¡æ¯\" -a=\"ä½œè€…\" å®¹å™¨ID ç›®æ ‡é•œåƒå:[tag] å®¹å™¨æ•°æ®å·ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·Docker çš„ç†å¿µå›é¡¾ å°†åº”ç”¨å’Œç¯å¢ƒéƒ½æ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼ å¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼ éœ€æ±‚: æ•°æ®å¯ä»¥æŒä¹…åŒ– MySQLï¼Œå®¹å™¨åˆ äº†ï¼Œæ•°æ®ä¸¢å¤±. éœ€æ±‚ï¼šMySQL æ•°æ®å¯ä»¥å­˜å‚¨åˆ°æœ¬åœ° å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Docker å®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ° ç›®å½•çš„æŒ‚è½½ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åˆ° Linux ä¸Šé¢ æ€»ç»“ä¸€å¥è¯: å®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œ! å®¹å™¨é—´ä¹Ÿå¯ä»¥æ•°æ®å…±äº«çš„! ä½¿ç”¨æ•°æ®å· æ–¹æ³•ä¸€ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤æ¥æŒ‚è½½ -v 12$ docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½• -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£# å¯åŠ¨èµ·æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker inspect å®¹å™¨id å®æˆ˜:å®‰è£… MySQL12345678910111213141516# è·å–é•œåƒ$ docker pull mysql:5.7# è¿è¡Œå®¹å™¨,éœ€è¦åšæ•°æ®æŒ‚è½½! # å®‰è£…å¯åŠ¨mysql,éœ€è¦é…ç½®å¯†ç ,è¿™æ˜¯å®˜æ–¹çš„# å®˜æ–¹æµ‹è¯•: docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=å¯†ç  -d mysql:tag#å¯mysql-d åå°è¿è¡Œ-p ç«¯å£æ˜ å°„-v ç«¯å£æ˜ å°„-e ç¯å¢ƒé…ç½®--name å®¹å™¨å$ docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql01 mysql:5.7# å¯åŠ¨æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨navicatæ¥æµ‹è¯•è¿æ¥#navicat-è¿æ¥åˆ°æœåŠ¡å™¨çš„3310 --- 3310å’Œå®¹å™¨å†…çš„3306æ˜ å°„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è¿æ¥ä¸Šäº† å‡è®¾æˆ‘ä»¬å°†å®¹å™¨åˆ é™¤ï¼ŒæŒ‚è½½åˆ°æœ¬åœ° çš„æ•°æ®å·ä¾æ—§æ²¡æœ‰ä¸¢å¤±ï¼Œè¿™å°±å®ç°äº†å®¹å™¨æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ å…·åå’ŒåŒ¿åæŒ‚è½½1234567891011# åŒ¿åæŒ‚è½½-v å®¹å™¨å†…è·¯å¾„$ docker run -d -p 8080:80 --name nginx01 -v /etc/nginx nginx:alpine# æŸ¥çœ‹æ‰€æœ‰çš„volumeæƒ…å†µ$ docker volume lsDRIVER VOLUME NAMElocal b448950f96ca2daed2a90cd21e687431653dc9a2f40ccf51e0ce38432f6564a4# è¿™ä¸ªå°±æ˜¯åŒ¿åæŒ‚è½½ï¼Œ-væ—¶åªå†™äº†å®¹å™¨å†…è·¯å¾„ï¼Œæ²¡æœ‰å†™# é€šè¿‡ -v å·å:å®¹å™¨å†…è·¯å¾„ æ‰€æœ‰çš„ Docker å®¹å™¨å†…çš„å·,æ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ /var/lib/Docker/volumes/ å·å /_data æˆ‘ä»¬é€šè¿‡å…·åæŒ‚è½½å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°ä¸€ä¸ªå·ï¼Œå¤§å¤šæ•°æƒ…å†µåœ¨ä½¿ç”¨çš„å…·åæŒ‚è½½ 123# å¦‚ä½•ç¡®å®šæ˜¯å…·åæŒ‚è½½è¿˜æ˜¯åŒ¿åæŒ‚è½½è¿˜æ˜¯æŒ‡å®šè·¯å¾„æŒ‚è½½-v å®¹å™¨å†…è·¯å¾„ # åŒ¿åæŒ‚è½½-v å·å:å®¹å™¨å†…è·¯å¾„ # å…·åæŒ‚è½½ æ‹“å±•ï¼š 12345678#é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„: ro rw æ”¹å˜è¯»å†™æƒé™# ro read only# read and write#ä¸€æ—¦è®¾ç½®äº†å®¹å™¨æƒé™,å®¹å™¨å¯¹æŒ‚è½½å‡ºæ¥çš„å†…å®¹å°±æœ‰é™å®šäº†!docker -run -P -name nginx01 -v /etc/nginx:ro nginxdocker -run -P -name nginx01 -v /etc/nginx:rw nginxro : åªè¦çœ‹åˆ°roå°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ”¹å˜,å®¹å™¨å†…éƒ¨æ— æ³•æ“ä½œ dockerfiledockerfile æ˜¯ç”¨æ¥æ„å»º docker é•œåƒçš„æ–‡ä»¶ï¼Œå‘½ä»¤å‚æ•°è„šæœ¬ã€‚ æ„å»ºæ­¥éª¤ï¼š ç¼–å†™ä¸€ä¸ª dockerfile æ–‡ä»¶ docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ docker run é•œåƒ docker push å‘å¸ƒé•œåƒï¼ˆdockerHubï¼Œé˜¿é‡Œäº‘é•œåƒä»“åº“ï¼‰ å¾ˆå¤šå®˜æ–¹é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯æ²¡æœ‰çš„ï¼Œæˆ‘ä»¬é€šå¸¸è‡ªå·±æ‰“é€ è‡ªå·±çš„é•œåƒ Dockerfileçš„æ„å»ºè¿‡ç¨‹åŸºç¡€çŸ¥è¯†ï¼š æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤)éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯ æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ #è¡¨ç¤ºæ³¨é‡Š æ¯ä¸€æ¡å‘½ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªé•œåƒå±‚ï¼Œå¹¶æäº¤ Dockerfile æ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™ Dockerfile æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ã€‚ Docker é•œåƒé€æ¸æˆä¸ºä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼Œå¿…é¡»è¦æŒæ¡ æ­¥éª¤ï¼š å¼€å‘ï¼Œéƒ¨ç½²ï¼Œè¿ç»´ Dockerfileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡æ­¥éª¤ï¼Œæºä»£ç  DockerImagesï¼šé€šè¿‡ Dockerfile æ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“ Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡å™¨ Dockerfileçš„æŒ‡ä»¤123456789101112FROM # åŸºç¡€é•œåƒ, ä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»ºMANTAINER # é•œåƒæ˜¯è°å†™çš„, å§“å+é‚®ç®±RUN # é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤ADD # æ­¥éª¤, tomcaté•œåƒ,å‹ç¼©åŒ…! æ·»åŠ å†…å®¹WORKDIR # é•œåƒçš„å·¥ä½œç›®å½•VOLUME # æŒ‚è½½çš„ç›®å½•EXPOSE # æš´éœ²ç«¯å£é…ç½®CMD # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤,åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆ,å¯è¢«æ›¿ä»£ENTRYPOINT # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤,å¯ä»¥è¿½åŠ å‘½ä»¤ONBUILD # å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡ŒONBUILDçš„æŒ‡ä»¤,è§¦å‘æŒ‡ä»¤COPY # ç±»ä¼¼ADD,å°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­ENV # æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ å®æˆ˜æµ‹è¯•docker Hub ä¸­99%é•œåƒéƒ½æ˜¯ä» CentOS åŸºç¡€é•œåƒè¿‡æ¥çš„,ç„¶åé…ç½®éœ€è¦çš„è½¯ä»¶ åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ CentOS 1234567891011121314151617# 1. ç¼–å†™ dockerfile æ–‡ä»¶FROM centosMAINTAINER jiawei&lt;jiaweilee95@126.com&gt;ENV MYPATH /usr/localWORKDIR $&#123;MYPATH&#125;RUN yum -y install vim &amp;&amp; yum -y install net-toolsEXPOSE 80CMD echo $&#123;MYPATH&#125; &amp;&amp; echo \"--end--\" &amp;&amp; /bin/sh# 2. é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ„å»ºé•œåƒdocker build -f &lt;dockerfileæ–‡ä»¶ç›®å½•&gt; -t &lt;é•œåƒå:[tag]&gt; .# 3. æµ‹è¯• CMD å’Œ ENTRYPOINT çš„åŒºåˆ« 12CMD # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤,åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆ,å¯è¢«æ›¿ä»£ENTRYPOINT # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤,å¯ä»¥è¿½åŠ å‘½ä»¤ æµ‹è¯• CMD 12345678910111213141516171819202122232425262728293031323334353637383940# ç¼–å†™ dockerfile æ–‡ä»¶$ vim dockerfile-cmd-testFROM centosCMD [\"ls\", \"-a\"]# æ„å»ºé•œåƒ$ docker build -f dockerfile-cmd-test -t centos .# run è¿è¡Œï¼Œå‘ç°ls -aç”Ÿæ•ˆ$ docker run 963149b1ac5d....dockerenvbindevetchomeliblib64lost+foundmediamntoptprocrootrunsbinsrvsystmpusrvar# æƒ³è¦è¿½åŠ ä¸€ä¸ªå‘½ä»¤ -l ls -al$ docker run 963149b1ac5d -ldocker: Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused \"exec: \\\"-l\\\": executable file not found in $PATH\": unknown.ERRO[0000] error waiting for container: context canceled # cmdçš„æƒ…å†µä¸‹ æ›¿æ¢äº†CMD[\"ls\",\"-a\"]å‘½ä»¤,-ä¸æ˜¯å‘½ä»¤è¿½åŠ  ENTRYPOINT æ˜¯å¾€å‘½ä»¤ä¹‹åè¿½åŠ  12345678910111213141516171819202122232425262728293031323334353637# ç¼–å†™dockerfileæ–‡ä»¶$ vim dockerfile-cmd-testFROM centosENTRYPOINT [\"ls\", \"-a\"]# æ„å»ºé•œåƒ$ docker build -f dockerfile-cmd-test -t centos .# run è¿è¡Œï¼Œå‘ç°ls -aç”Ÿæ•ˆ$ docker run 963149b1ac5d....dockerenvbindevetchomeliblib64lost+foundmediamntoptprocrootrunsbinsrvsystmpusrvar# æƒ³è¦è¿½åŠ ä¸€ä¸ªå‘½ä»¤ -l ls -al$ docker run 963149b1ac5d -l# è¿™é‡Œæ˜¯ç”Ÿæ•ˆçš„ å®æˆ˜ï¼šTomcaté•œåƒ å‡†å¤‡é•œåƒæ–‡ä»¶ tomcat å‹ç¼©åŒ…ï¼Œjdk å‹ç¼©åŒ… ç¼–å†™ Dockerfile æ–‡ä»¶ï¼Œå®˜æ–¹å‘½å Dockerfileï¼Œbuild ä¼šè‡ªåŠ¨å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¸éœ€è¦ -f æŒ‡å®šæ–‡ä»¶äº† 1234567891011121314151617181920212223242526272829FROM centosMAINTAINER czp&lt;2432688105@qq.com&gt;COPY readme.txt /usr/local/readme.txtADD apache-tomcat-9.0.33.tar.gz /usr/local/ADD jdk-8u221-linux-x64.rpm /usr/local/RUN yum -y install vim ENV MYPATH /usr/local WORKDIR $MYPATH ENV JAVA_HOME /usr/local/jdk1.8.0_11ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarENV CATALINA_HOME /usr/local/apache-tomcat-9.0.33ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.33# é…ç½®ç¯å¢ƒå˜é‡ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:/CATALINA_HOME/binEXPOSE 8080CMD /usr/local/apache-tomcat-9.0.33/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-9.0.33/bin/logs/catalina.out æ„å»ºé•œåƒ 1# docker build -t diytomcat . æœ¬åœ°æµ‹è¯• curl localhost:9090 å‘å¸ƒé•œåƒ Dockerhub åœ°å€ hub.docker.com æ³¨å†Œè‡ªå·±çš„è´¦å·! ç¡®å®šè¿™ä¸ªè´¦å·å¯ä»¥ç™»å½• åœ¨æœåŠ¡å™¨ä¸Šæäº¤è‡ªå·±çš„é•œåƒ 1234567891011$ docker login --helpUsage: docker login [OPTIONS] [SERVER]Log in to a docker registry.If no server is specified, the default is defined by the daemon.Options: -p, --password string Password --password-stdin Take the password from stdin -u, --username string Username ç™»å½•å®Œæ¯•å°±å¯ä»¥æäº¤é•œåƒäº†,å°±æ˜¯ä¸€æ­¥ docker push æäº¤åˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“ ç™»å½•é˜¿é‡Œäº‘ æ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡ åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºå®¹å™¨é•œåƒ æµè§ˆé˜¿é‡Œäº‘ å°ç»“ Docker ç½‘ç»œåŸç†ç†è§£ Docker0æ¸…ç©ºæ‰€æœ‰ç¯å¢ƒ æµ‹è¯• ä¸‰ä¸ªç½‘ç»œ 12345678910111213141516# docker æ˜¯å¦‚ä½•å¤„ç†å®¹å™¨ç½‘ç»œè®¿é—®çš„ï¼Ÿ$ docker run -d -P --name tomcat01 tomcat# æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç½‘ç»œåœ°å€ ip addr å‘ç°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°ä¸€ä¸ªeth0@if8 ipåœ°å€ï¼Œdockeråˆ†é…çš„$ docker exec -it tomcat01 ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever2: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop state DOWN group default qlen 1000 link/sit 0.0.0.0 brd 0.0.0.07: eth0@if8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 172.17.0.3/16 brd 172.17.255.255 scope global eth0 valid_lft forever preferred_lft forever# linuxèƒ½pingé€šå®¹å™¨å†…éƒ¨ åŸç† æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ª docker å®¹å™¨ï¼Œdocker å°±ä¼šç»™ docker å®¹å™¨åˆ†é…ä¸€ä¸ª ipï¼Œæˆ‘ä»¬åªè¦å®‰è£…äº† dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç½‘å¡ Docker0 æ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æ˜¯ veth-pair æŠ€æœ¯ å†æ¬¡æµ‹è¯• ip addr å†å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‘ç°åˆå¤šäº†ä¸€å¯¹ç½‘å¡ 1234# æˆ‘ä»¬å‘ç°è¿™ä¸ªå®¹å™¨å¸¦æ¥ç½‘å¡, éƒ½æ˜¯ä¸€å¯¹å¯¹çš„# veth-pair å°±æ˜¯ä¸€å¯¹è™šæ‹Ÿæœºè®¾å¤‡æ¥å£,ä»–ä»¬éƒ½æ˜¯æˆå¯¹å‡ºç°çš„,ä¸€ç«¯è¿ç€åè®®,ä¸€ç«¯å½¼æ­¤ç›¸è¿# æ­£å› ä¸ºæœ‰è¿™ä¸ªç‰¹æ€§,veth-pair å……å½“æ¡¥æ¢,è¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„# openStac,Dockerå®¹å™¨ä¹‹é—´çš„è¿æ¥,OVSçš„è¿æ¥,éƒ½æ˜¯ä½¿ç”¨ veth-pair æŠ€æœ¯ æµ‹è¯• tomcat01 å’Œ tomcat02 æ˜¯å¦èƒ½ ping é€š 1# ç»“è®ºï¼šå®¹å™¨å’Œå®¹å™¨ä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸pingé€šçš„ ç»“è®º: tomcat01 å’Œ tomcat02 æ˜¯å…±ç”¨çš„ä¸€ä¸ªè·¯ç”±å™¨, Docker0 æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹,éƒ½æ˜¯ Docker0 è·¯ç”±çš„, Docker ä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨IP å°ç»“ Docker ä½¿ç”¨çš„æ˜¯ Linux çš„æ¡¥æ¥ï¼Œå®¿ä¸»æœºæ˜¯ä¸€ä¸ª Docker å®¹å™¨çš„ç½‘æ¡¥ Docker0 Docker ä¸­æ‰€æœ‰çš„ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„,è™šæ‹Ÿçš„è½¬å‘æ•ˆç‡é«˜ï¼ˆå†…ç½‘ä¼ é€’æ–‡ä»¶ï¼‰ åªè¦å®¹å™¨åˆ é™¤,å¯¹åº”ç½‘æ¡¥çš„ä¸€å¯¹å°±æ²¡äº† â€“link æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url = ipï¼›é¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®åº“ ip æ”¹å˜äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åå­—æ¥è®¿é—®å®¹å™¨å—ï¼Ÿ 1234567891011121314151617181920$ docker exec -it tomcat02 ping tomcat01ping: tomcat01: Name or service not known# é€šè¿‡--linkå¯ä»¥è§£å†³ç½‘ç»œè¿æ¥é—®é¢˜$ docker run -d -P --name tomcat03 --link tomcat02 tomcat6aedb0ba2e798b184f42f98e4a38ce2a54cb97d47b985d17065b064a7f73d404$ docker exec -it tomcat03 ping tomcat02PING tomcat02 (172.17.0.3) 56(84) bytes of data.64 bytes from tomcat02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.061 ms64 bytes from tomcat02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.040 ms64 bytes from tomcat02 (172.17.0.3): icmp_seq=3 ttl=64 time=0.040 ms64 bytes from tomcat02 (172.17.0.3): icmp_seq=4 ttl=64 time=0.082 ms64 bytes from tomcat02 (172.17.0.3): icmp_seq=5 ttl=64 time=0.039 ms^C--- tomcat02 ping statistics ---5 packets transmitted, 5 received, 0% packet loss, time 134msrtt min/avg/max/mdev = 0.039/0.052/0.082/0.018 ms# åå‘æ˜¯å¦å¯ä»¥pingé€šå—[root@CZP ~]# docker exec -it tomcat02 ping tomcat03 -link æœ¬è´¨å°±æ˜¯åœ¨ hosts ä¸­æ·»åŠ æ˜ å°„ æˆ‘ä»¬ç°åœ¨ç© docker å·²ç»ä¸å»ºè®®ä½¿ç”¨ â€“link äº†! è‡ªå®šä¹‰ç½‘ç»œ,ä¸ä½¿ç”¨ Docker0! Docker0 é—®é¢˜: å®ƒä¸æ”¯æŒå®¹å™¨åè¿æ¥è®¿é—®! è‡ªå®šä¹‰ç½‘ç»œ æŸ¥çœ‹æ‰€æœ‰çš„ Docker ç½‘ç»œ 12345$ docker network lsNETWORK ID NAME DRIVER SCOPE86c70406cec4 bridge bridge locale2cd35c81ffb host host localc6fe6b78ab62 none null local ç½‘ç»œæ¨¡å¼ bridge: æ¡¥æ¥æ¨¡å¼ docker æ­æ¡¥ï¼ˆé»˜è®¤ï¼‰ noneï¼š ä¸é…ç½®ç½‘ç»œ hostï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ container: å®¹å™¨å†…ç½‘ç»œè¿é€šï¼ˆç”¨å¾—å°‘ï¼Œå±€é™å¾ˆå¤§ï¼‰ 12345678910111213141516# ç›´æ¥å¯åŠ¨çš„å‘½ä»¤ --net brodge,é»˜è®¤docker0docker run -d -P --name tomcat01 --net bridge tomcat# docker0çš„ç‰¹ç‚¹: é»˜è®¤çš„,åŸŸåæ˜¯ä¸èƒ½è®¿é—®çš„, --linkå¯ä»¥æ‰“é€šè¿æ¥# è‡ªå®šä¹‰ç½‘ç»œ# --driver bridgedocker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet87d0f163b3a0c857d281bf4e97675d03555486c530969d1cb04950f203133b55$ docker network lsNETWORK ID NAME DRIVER SCOPE86c70406cec4 bridge bridge locale2cd35c81ffb host host local87d0f163b3a0 mynet bridge localc6fe6b78ab62 none null local è‡ªå·±çš„ç½‘ç»œåˆ›å»ºå¥½äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105$ Docker network inspect mynet[ &#123; \"Name\": \"mynet\", \"Id\": \"87d0f163b3a0c857d281bf4e97675d03555486c530969d1cb04950f203133b55\", \"Created\": \"2020-07-08T01:56:39.0611734Z\", \"Scope\": \"local\", \"Driver\": \"bridge\", \"EnableIPv6\": false, \"IPAM\": &#123; \"Driver\": \"default\", \"Options\": &#123;&#125;, \"Config\": [ &#123; \"Subnet\": \"192.168.0.0/16\", \"Gateway\": \"192.168.0.1\" &#125; ] &#125;, \"Internal\": false, \"Attachable\": false, \"Ingress\": false, \"ConfigFrom\": &#123; \"Network\": \"\" &#125;, \"ConfigOnly\": false, \"Containers\": &#123;&#125;, \"Options\": &#123;&#125;, \"Labels\": &#123;&#125; &#125;]$ docker run -d -P --name tomcat-net-01 --net mynet tomcatf8acd6bd8a21c27ca293d4c2d150448299192bd1f58b41d273d61d24cfe7d9a8$ docker run -d -P --name tomcat-net-02 --net mynet tomcat84b8b3a4a45c579eb479dfa036bc6e88f2c4ea5a0e8edd0c8f225bddebb2747c$ docker network inspect mynet[ &#123; \"Name\": \"mynet\", \"Id\": \"87d0f163b3a0c857d281bf4e97675d03555486c530969d1cb04950f203133b55\", \"Created\": \"2020-07-08T01:56:39.0611734Z\", \"Scope\": \"local\", \"Driver\": \"bridge\", \"EnableIPv6\": false, \"IPAM\": &#123; \"Driver\": \"default\", \"Options\": &#123;&#125;, \"Config\": [ &#123; \"Subnet\": \"192.168.0.0/16\", \"Gateway\": \"192.168.0.1\" &#125; ] &#125;, \"Internal\": false, \"Attachable\": false, \"Ingress\": false, \"ConfigFrom\": &#123; \"Network\": \"\" &#125;, \"ConfigOnly\": false, \"Containers\": &#123; \"84b8b3a4a45c579eb479dfa036bc6e88f2c4ea5a0e8edd0c8f225bddebb2747c\": &#123; \"Name\": \"tomcat-net-02\", \"EndpointID\": \"889a15d10cf311193a18033af3a75eefa6a074291e84aab65e9d88f4b9889bf2\", \"MacAddress\": \"02:42:c0:a8:00:03\", \"IPv4Address\": \"192.168.0.3/16\", \"IPv6Address\": \"\" &#125;, \"f8acd6bd8a21c27ca293d4c2d150448299192bd1f58b41d273d61d24cfe7d9a8\": &#123; \"Name\": \"tomcat-net-01\", \"EndpointID\": \"810c98a4ee532167410f1bc28acbc1d3aac11390e7c5a0c0864c20832bf06fb6\", \"MacAddress\": \"02:42:c0:a8:00:02\", \"IPv4Address\": \"192.168.0.2/16\", \"IPv6Address\": \"\" &#125; &#125;, \"Options\": &#123;&#125;, \"Labels\": &#123;&#125; &#125;]# å†æ¬¡æµ‹è¯•pingè¿æ¥$ docker exec -it tomcat-net-01 ping 192.168.0.3PING 192.168.0.3 (192.168.0.3) 56(84) bytes of data.64 bytes from 192.168.0.3: icmp_seq=1 ttl=64 time=0.056 ms64 bytes from 192.168.0.3: icmp_seq=2 ttl=64 time=0.156 ms64 bytes from 192.168.0.3: icmp_seq=3 ttl=64 time=0.086 ms64 bytes from 192.168.0.3: icmp_seq=4 ttl=64 time=0.037 ms^C--- 192.168.0.3 ping statistics ---4 packets transmitted, 4 received, 0% packet loss, time 162msrtt min/avg/max/mdev = 0.037/0.083/0.156/0.046 ms# ç°åœ¨ä¸ä½¿ç”¨--linkä¹Ÿå¯ä»¥pingå®¹å™¨åå­—$ docker exec -it tomcat-net-02 ping 192.168.0.2PING 192.168.0.2 (192.168.0.2) 56(84) bytes of data.64 bytes from 192.168.0.2: icmp_seq=1 ttl=64 time=0.039 ms64 bytes from 192.168.0.2: icmp_seq=2 ttl=64 time=0.066 ms^C--- 192.168.0.2 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 47msrtt min/avg/max/mdev = 0.039/0.052/0.066/0.015 ms è‡ªå®šä¹‰ç½‘ç»œ docker éƒ½å¸®æˆ‘ä»¬ç»´æŠ¤å¥½äº†å¯¹åº”å…³ç³»ï¼Œæ¨èå¹³æ—¶è¿™æ ·ä½¿ç”¨ç½‘ç»œï¼ å¥½å¤„: ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„é›†ç¾¤ï¼Œä¿è¯é›†ç¾¤ä¹‹é—´æ˜¯å®‰å…¨å’Œå¥åº·çš„ ç½‘ç»œè¿é€š 1234#æµ‹è¯•æ‰“é€š tomcat01åˆ°tomcat-net-01$ docker network connect mynet tomcat01# è¿é€šä¹‹åå°±æ˜¯å°† tomcat01 æ”¾åˆ°äº†mynetç½‘ç»œä¸‹# ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªip é˜¿é‡Œäº‘: å…¬ç½‘ip ç§ç½‘ip 12345678910111213# 01 è¿é€šok$ docker exec -it tomcat01 ping tomcat-net-01PING tomcat-net-01 (192.168.0.2) 56(84) bytes of data.64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.087 ms64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.065 ms^C--- tomcat-net-01 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 71msrtt min/avg/max/mdev = 0.065/0.076/0.087/0.011 ms# 02 ä¾æ—§æ˜¯è¿ä¸é€šçš„$ docker exec -it tomcat02 ping tomcat-net-01ping: tomcat-net-01: Name or service not known ç»“è®ºï¼šè¦è·¨ç½‘ç»œæ“ä½œåˆ«äººï¼Œå°±éœ€è¦ä½¿ç”¨ docker network connect è¿é€š","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://github.com/Kaviilee/blog.git/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"docker","permalink":"https://github.com/Kaviilee/blog.git/tags/docker/"}],"author":{"name":"Kaviilee","avatar":"https://cdn.jsdelivr.net/gh/Kaviilee/cdn@1.1/blog/images/custom/papalymo.jpg"}},{"title":"jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦","slug":"jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦","date":"2019-09-07T17:25:18.000Z","updated":"2020-09-24T14:04:55.105Z","comments":true,"path":"2019/09/07/jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦/","link":"","permalink":"https://github.com/Kaviilee/blog.git/2019/09/07/js%E8%8E%B7%E5%8F%96%E8%A7%86%E5%8F%A3%E5%92%8C%E6%96%87%E6%A1%A3%E9%AB%98%E5%BA%A6/","excerpt":"jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦","text":"jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦ jsè·å–è§†å£å’Œæ–‡æ¡£é«˜åº¦ é¡¹ç›® å†…å®¹ clientHeight content area + padding offsetHeight border + content area + padding scrollHeight æ²¡æœ‰æ»šåŠ¨æ¡ï¼ˆå†…å®¹å±•å¼€æ—¶ï¼‰çš„é«˜åº¦ bodyå’Œhtmlåˆ†åˆ«è¡¨ç¤ºdocument.bodyå’Œdocument.documentElement html.clientHeight è¿”å›è§†å£é«˜åº¦html.offsetHeight è¿”å› å…ƒç´ çš„é«˜åº¦ï¼Œåœ¨æ²¡æœ‰ç»™ å…ƒç´ è®¾ç½®heightæ—¶ï¼Œå¯ä»¥ç†è§£ä¸ºæ–‡æ¡£é«˜åº¦ã€‚ie6-8è¿”å›è§†å£é«˜åº¦html.scrollHeight æ€»æ˜¯è¿”å›æ–‡æ¡£é«˜åº¦ã€‚åœ¨ firefoxï¼Œoperaï¼Œie8 ä¸­ï¼Œè¿”å›æ–‡æ¡£é«˜åº¦å’Œè§†å£é«˜åº¦ä¸­è¾ƒå¤§çš„é‚£ä¸ªbody.clientHeightå’Œbody.offsetHeight è¿”å›å…ƒç´ çš„é«˜åº¦ï¼ˆè¿‘ä¼¼äºæ–‡æ¡£é«˜åº¦ï¼‰ï¼Œå¦‚æœ è®¾ç½® heightï¼Œåˆ™è¿”å›è®¾å®šçš„å€¼ï¼ˆie6 ä»ç„¶è¿”å› å†…å…ƒç´ çš„æ€»é«˜åº¦ï¼‰ã€‚body.scrollHeight æ€»æ˜¯è¿”å›æ–‡æ¡£é«˜åº¦ã€‚åœ¨ webkit ä¸­ï¼Œè¿”å›æ–‡æ¡£é«˜åº¦å’Œè§†å£é«˜åº¦ä¸­è¾ƒå¤§çš„é‚£ä¸ªã€‚ æ€»ä¹‹ï¼Œè·å–è§†å£é«˜åº¦ç”¨ html.clientHeight ,IE6-8 è¿˜å¯ä»¥ç”¨ html.offsetHeightã€‚è·å–æ–‡æ¡£é«˜åº¦å¯ä»¥ç”¨ html.scrollHeight æˆ– body.scrollHeightã€‚ å¦å¤–ï¼Œâ€‹â€‹ç°ä»£æµè§ˆå™¨ä¸­è¿˜æœ‰ä¸€ä¸ªå±æ€§ window.innerHeight å¯ä»¥ç”¨æ¥è·å–è§†å£é«˜åº¦ï¼ŒIE9+ æ‰å¼€å§‹æ”¯æŒã€‚å¾—åˆ°çš„é«˜åº¦æœ‰æ—¶å€™ä¼šå¤šåå‡ ä¸ªåƒç´ ï¼ŒinnerHeight æŠŠæ»šåŠ¨æ¡çš„é«˜åº¦ä¹Ÿè®¡ç®—åœ¨å†…ã€‚ 1234567// è·å–è§†å£é«˜åº¦let viewportH = window.innerHeight || document.documentElement.clientHeight;// è·å–æ–‡æ¡£é«˜åº¦let docH = document.body.scrollHeight;// æˆ–è€…let docH = document.documentElement.scrollHeight","categories":[{"name":"JavaScript","slug":"javascript","permalink":"https://github.com/Kaviilee/blog.git/categories/javascript/"}],"tags":[],"author":{"name":"Kaviilee","avatar":"https://cdn.jsdelivr.net/gh/Kaviilee/cdn@1.1/blog/images/custom/papalymo.jpg"}}],"categories":[{"name":"JavaScript","slug":"javascript","permalink":"https://github.com/Kaviilee/blog.git/categories/javascript/"},{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://github.com/Kaviilee/blog.git/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"git","slug":"git","permalink":"https://github.com/Kaviilee/blog.git/tags/git/"},{"name":"æ–‡æ¡£æ’ç‰ˆ","slug":"æ–‡æ¡£æ’ç‰ˆ","permalink":"https://github.com/Kaviilee/blog.git/tags/%E6%96%87%E6%A1%A3%E6%8E%92%E7%89%88/"},{"name":"Docker","slug":"docker","permalink":"https://github.com/Kaviilee/blog.git/tags/docker/"}]}